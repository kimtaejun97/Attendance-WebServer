<!DOCTYPE html>
<html xmlns:th ="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="fragments :: headerFragment"></head>

<body>
<nav th:replace="fragments :: navFragment"> </nav>

<h3 class="py-3 card-title text-center">내가 등록된 장소</h3>
<hr>

<div class="container">
    <table class="table">
        <thead>
        <th scope="col">별칭</th><th scope="col">위치</th><th scope="col">생성자</th><th scope="col">생성 날짜</th><th scope="col"></th><th scope="col"></th><th scope="col"></th>
        </thead>
        <tbody>
        <tr th:each="place : ${places}">
            <td th:text="${place.alias}"></td>
            <td th:text="${place.beacon.location}"></td>
            <td th:text="${place.creator.username}"></td>
            <td th:text="${place.creationDate}"></td>
            <td><a class="btn btn-outline-primary" href="#" th:href="@{'/attendance/my/' + ${place.beacon.location}}">출입 현황</a></td>
            <td th:if="${place.creator.username} == ${#authentication.name}" ><a class="btn btn-outline-secondary" href="#" th:href="@{'/place/management/' + ${place.beacon.location}}">관리</a></td>
            <td><a class="btn btn-outline-danger" href="#" th:if="${place.creator.username} == ${#authentication.name}" th:href="@{'/place/remove-user/' + ${place.beacon.location}}">삭제</a></td>
            <td><a class="btn btn-outline-danger" href="#" th:if="${place.creator.username} != ${#authentication.name}" th:href="@{'/place/leave-user/' + ${place.beacon.location}}">탈퇴</a></td>
            <td></td>
        </tr>
        </tbody>
    </table>

</div>

<th:block th:replace="fragments :: footerFragment"/>
</body>
</html>